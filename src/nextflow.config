//Enable trace by default
trace.enabled = true

params {
  global_executor = 'local'
  cpu = 12
  memory = "32GB"
  params.gzip = "/usr/bin/gzip"
  params.pigz = "/usr/bin/pigz"

  // quality_control.nf config
  params.name = "quality control analysis"
  params.fastqc = "/usr/local/bin/fastqc"
  params.multiqc = "/usr/local/bin/multiqc"
  params.urqt = "/usr/local/bin/UrQt"
  params.trimmomatic = "/usr/bin/trimmomatic"
  params.cutadapt = "/usr/local/bin/cutadapt"

  // mapping.nf config
  mapper = "salmon"
  paired = true
  salmon = "/usr/local/bin/salmon"
  salmon_parameters = "--useVBOpt --numBootstraps 100 --seqBias --gcBias --posBias --libType IU"
  kallisto = "/usr/local/bin/kallisto"
  kallisto_parameters = "--bias --bootstrap-samples 100"
  bowtie2 = "/usr/local/bin/bowtie2"
  bowtie2_parameters = "--very-sensitive"
  bedtools = "/usr/bin/bedtools"
  samtools = "/usr/bin/samtools"
  quantifier = "htseq"
  htseq = "/usr/local/bin/htseq-count"
  htseq_parameters = "--mode=intersection-nonempty -a 10 -s no -t exon -i gene_id"
  rsem = "/usr/local/bin/rsem"
  rsem_parameters = ""
  gzip = "/usr/bin/gzip"
  pigz = "/usr/bin/pigz"
  mean = 200
  sd = 20
}

executor {
  $sge {
    queueSize = 1000
    pollInterval = '30sec'
    queue = 'E5-2670deb128*'
    penv = 'mpi16_debian 16'
    clusterOptions = ''
  }
  $local {
    cpus = ${params.cpu}
    memory = ${params.memory}
  }
}

process {
    $get_file_name {
      executor = ${params.global_executor}
      cpus = ${params.cpu}
      memory = "2GB"
      time = "10h"
    }
    $fastqc {
      executor = ${params.global_executor}
      cpus = 1
      memory = "2GB"
      time = "10h"
    }
    $adaptor_removal {
      executor = ${params.global_executor}
      cpus = 1
      memory = "2GB"
      time = "10h"
    }
    $trimming {
      executor = ${params.global_executor}
      cpus = ${params.cpu}
      memory = "2GB"
      time = "10h"
    }
    $fastqc_trimmed {
      executor = ${params.global_executor}
      cpus = 1
      memory = "2GB"
      time = "10h"
    }
    $multiqc {
      executor = "local"
      cpus = 1
      memory = "2GB"
      time = "10h"
    }
    $get_pigz_version {
    executor = "local"
      cpus = 1
      memory = "1GB"
      time = "1h"
    }
    $get_gzip_version {
    executor = "local"
      cpus = 1
      memory = "1GB"
      time = "1h"
    }
}

docker {
  temp = 'auto'
  enabled = false
  runOptions = "--cpus=\"${params.cpu}\" --memory=\"${params.memory}\""
}

profiles {
  standard {
    process.executor = 'local'
    queueSize = 10
    pollInterval = '1sec'
  }
  cluster {
    process.executor = 'sge'
    process.queue = 'long'
    process.memory = '10GB'
    queueSize = 100
    pollInterval = '30sec'
  }
}
