//Enable trace by default
trace.enabled = true

params {
  global_executor = 'local'
  cpu = 12
  memory = "32GB"
  params.gzip = "/usr/bin/gzip"
  params.pigz = "/usr/bin/pigz"
  pbs_header = """source /usr/share/modules/init/bash
  module use /applis/PSMN/Modules
  module load Base/psmn
  umask 002
  ls .
  """
}

process {
  $get_pigz_version {
  executor = "local"
    cpus = 1
    memory = "1GB"
    time = "1h"
  }
  $get_gzip_version {
  executor = "local"
    cpus = 1
    memory = "1GB"
    time = "1h"
  }
}

docker {
  enabled = false
}

profiles {
  quality_control {
    process.executor = 'local'
    process.queueSize = 10
    process.pollInterval = '1sec'
    includeConfig 'pipe/quality_control.config'
  }
  quality_control_docker {
    process.executor = 'local'
    process.container = "quality_control:0.0.1"
    docker.temp = 'auto'
    docker.enabled = true
    docker.runOptions = "--cpus=\"${params.cpu}\" --memory=\"${params.memory}\""
    includeConfig 'pipe/quality_control.config'
  }
  quality_control_sge {
    process.executor = 'sge'
    process.queueSize = 1000
    process.pollInterval = '60sec'
    includeConfig 'pipe/quality_control.config'
  }
  mapping {
    process.executor = 'local'
    process.queueSize = 10
    process.pollInterval = '1sec'
    includeConfig 'pipe/mapping.config'
  }
  quality_control_sge {
    process.executor = 'sge'
    process.queueSize = 1000
    process.pollInterval = '60sec'
    includeConfig 'pipe/mapping.config'
  }
  mapping_docker {
    process.executor = 'local'
    process.queueSize = 10
    process.pollInterval = '1sec'
    process.container = "mapping:0.0.1"
    docker.temp = 'auto'
    docker.enabled = true
    docker.runOptions = "--cpus=\"${params.cpu}\" --memory=\"${params.memory}\""
    includeConfig 'pipe/mapping.config'
  }
}
